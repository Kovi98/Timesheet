@page
@model Portal.Areas.Documents.Pages.IndexModel
<!--AJAX POST needed-->
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Xsrf
@functions{
    public string GetAntiXsrfRequestToken()
    {
        return Xsrf.GetAndStoreTokens(HttpContext).RequestToken;
    }
}

@{
    ViewData["Title"] = "Smlouvy";
}
@{
    if (ViewData.ModelState["Error"] != null)
    {
        foreach (var item in ViewData.ModelState["Error"].Errors)
        {
            <script>
                toastr.error("@item.ErrorMessage");
            </script>
        }
    }
}

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Seznam šablon pro smlouvy</h3>
                <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <table id="dataTable" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%">
                    <thead>
                        <tr>
                            <th>
                                #
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.DocumentStorage[0].IsDefault)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.DocumentStorage[0].Name)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.DocumentStorage[0].DocumentName)
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.DocumentStorage)
                        {
                            <tr id="rowId-@Html.DisplayFor(modelItem => item.Id)">
                                <td>
                                    @Html.DisplayFor(modelItem => item.Id)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.IsDefault)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Name)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.DocumentName)
                                </td>
                                <td class="project-actions text-right">
                                    <a class="btn btn-primary btn-sm" asp-page="" asp-route-id="@item.Id" asp-fragment="card-detail">
                                        <i class="fas fa-folder">
                                        </i>
                                        Stáhnout šablonu
                                    </a>
                                    <a class="btn btn-info btn-sm" asp-page="" asp-page-handler="Edit" asp-route-id="@item.Id" asp-fragment="card-edit">
                                        <i class="fas fa-pencil-alt">
                                        </i>
                                        Upravit
                                    </a>
                                    <a class="btn btn-danger btn-sm" onclick="deleteTimesheetDetail(@item.Id)">
                                        <i class="fas fa-trash">
                                        </i>
                                        Smazat
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
